---
import { Image } from 'astro:assets';

import image_3 from '@images/agile_response.png';
import image_4 from '@images/beyond_sales_support.png';
import image_1 from '@images/cultural_bridge_2.png';
import image_2 from '@images/program_management_2.png';

// Content for the section title and subtitle
const title = `Our mission`;
const subTitle = `We offer tailor-made Business Development support in the Automotive OE (Original Equipment) sector, adapting ourselves to the needs of our partners.`;

const features = [
  {
    title: 'Complete Project Management',
    description: `From project award to <span class="font-bold">SOP</span> (Start of Production), we provide comprehensive program management throughout the development phase and series production.`,
    image: image_2,
    imageClass: 'mx-auto mt-5 self-end object-cover w-[90%] rounded-xl shadow-lg',
    imageContainerClass:
      'relative flex min-h-[30rem] w-full grow [container-type:inline-size] max-lg:mx-auto max-lg:max-w-sm bg-gradient-to-br from-slate-50 to-teal-50 p-4 rounded-xl',
    imageFadeClass:
      'pointer-events-none absolute inset-x-0 bottom-1 z-10 mx-auto h-16 w-[90%] bg-linear-to-b/oklch from-transparent via-white to-white',
    headingClass: 'pb-3 sm:pb-0',
    class: 'relative lg:row-span-2',
    wrapperClass: 'lg:rounded-l-3xl',
  },
  {
    title: 'Local Expertise',
    description:
      'Deep market knowledge in France, Italy, Benelux and Spain with on-the-ground presence and cultural understanding',
    image: image_1,
    imageClass: 'w-full rounded-t-xl shadow-lg',
    imageContainerClass:
      'relative flex flex-1 items-center justify-center px-4 max-lg:pb-12 max-lg:pt-10 lg:pb-2 bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl',
    imageFadeClass:
      'pointer-events-none absolute inset-x-0 bottom-1 z-10 mx-auto h-28 w-[90%] bg-linear-to-b/oklch from-transparent via-white to-white',
    class: 'relative max-lg:row-start-1',
    wrapperClass: 'max-lg:rounded-t-3xl',
  },

  {
    title: 'Agile Response',
    description:
      'We intervene effectively in the event of engineering modifications, technical obstacles, quality or logistics issues. Our lean structure ensures rapid adaptation.',
    image: image_3,
    imageClass: 'h-full object-cover rounded-xl shadow-lg',
    imageContainerClass: 'relative min-h-[30rem] w-full grow bg-gradient-to-br from-slate-50 to-teal-50 p-4 rounded-xl',
    imageSecondaryContainerClass: 'absolute bottom-0 left-10 right-0 top-10 overflow-hidden rounded-tl-xl shadow-2xl',
    class: 'relative lg:row-span-2',
    wrapperClass: 'max-lg:rounded-b-3xl lg:rounded-r-3xl',
  },
  {
    title: 'Beyond Sales Support',
    listItems: [
      'Recruitment assistance for technical profiles and resident engineers',
      'Network facilitation for industrial partnerships and joint ventures',
    ],
    image: image_4,
    imageClass: 'w-full rounded-t-xl shadow-lg',
    imageContainerClass:
      'relative flex flex-1 items-center justify-center px-4 max-lg:pb-12 max-lg:pt-10 lg:pb-2 bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl',
    imageFadeClass:
      'pointer-events-none absolute inset-x-0 bottom-1 z-10 mx-auto h-28 w-[90%] bg-linear-to-b/oklch from-transparent via-white to-white',
    class: 'relative max-lg:row-start-3 lg:col-start-2 lg:row-start-2',
    wrapperClass: 'rounded-lg',
  },
];
---

<div class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 md:py-14 lg:px-8 lg:py-20">
  {/* Section container for the title and subtitle */}
  <div class="mx-auto mb-10 max-w-2xl text-center lg:mb-14">
    <h2 class="text-2xl font-semibold text-balance text-slate-800 md:text-3xl md:leading-tight">
      <Fragment set:html={title} />
    </h2>
    <p class="mt-1 text-pretty text-slate-600">
      <Fragment set:html={subTitle} />
    </p>
  </div>

  <div class="mx-auto max-w-2xl px-6 lg:max-w-[85rem] lg:px-0">
    <div class="mt-10 grid gap-4 sm:mt-16 lg:grid-cols-3 lg:grid-rows-2">
      {
        features.map((feature) => (
          <div class={feature.class}>
            <div class={`absolute inset-px rounded-lg bg-white ${feature.wrapperClass}`} />
            <div class={`relative flex h-full flex-col overflow-hidden rounded-lg ${feature.wrapperClass}`}>
              <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
                <h3 class="mt-2 text-lg font-medium tracking-tight text-slate-800 max-lg:text-center">
                  {feature.title}
                </h3>

                {/* Render descriptions as paragraphs if available */}
                {feature.description && (
                  <p class="mt-2 max-w-lg text-sm/6 text-slate-600 max-lg:text-center" set:html={feature.description} />
                )}

                {/* Render list items if available */}
                {feature.listItems && (
                  <ul class="mt-2 max-w-lg list-inside list-disc space-y-1 text-sm/6 text-slate-600 marker:text-teal-600 max-lg:text-center">
                    {feature.listItems.map((item) => (
                      <li set:html={item} />
                    ))}
                  </ul>
                )}
              </div>

              {/* Render Image if available */}
              {feature.image && (
                <div class={`${feature.imageContainerClass}`}>
                  {feature.imageSecondaryContainerClass ? (
                    <div class={`${feature.imageSecondaryContainerClass}`}>
                      <Image class={`${feature.imageClass}`} src={feature.image} alt="" />
                    </div>
                  ) : (
                    <Image class={`${feature.imageClass}`} src={feature.image} alt="" />
                  )}
                </div>
              )}

              <div
                class={`pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 ${feature.wrapperClass}`}
              />
            </div>
          </div>
        ))
      }
    </div>
  </div>
</div>
